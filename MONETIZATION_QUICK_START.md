# üéØ Quick Start - –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏

## –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è
–í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Telegram Stars –∏–∑ –∫–æ—Ä–æ–±–∫–∏!

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
```bash
python -m bot.main
```

### 3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏
```
/subscription - –ø—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞
üéÅ –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å trial - –ø–æ–ª—É—á–∏—Ç—å 30 –¥–Ω–µ–π –±–µ—Å–ø–ª–∞—Ç–Ω–æ
üíé –í—ã–±—Ä–∞—Ç—å —Ç–∞—Ä–∏—Ñ - –∫—É–ø–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É —á–µ—Ä–µ–∑ Telegram Stars
```

### 4. –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥ (—á–µ—Ä–µ–∑ –ë–î)
```sql
INSERT INTO promo_codes (code, type, discount_percent, status, valid_from, max_uses, max_uses_per_user)
VALUES ('NEWYEAR2025', 'percent', 20, 'active', NOW(), 100, 1);
```

### 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
Background task –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ø–∏—Å–∫–∏ –∫–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

---

## –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∏—á–∏

‚úÖ **–ü–æ–¥–ø–∏—Å–∫–∏**:
- Trial 30 –¥–Ω–µ–π
- Monthly 990‚ÇΩ
- Quarterly 2490‚ÇΩ (—Å–∫–∏–¥–∫–∞ 15%)
- Yearly 8280‚ÇΩ (—Å–∫–∏–¥–∫–∞ 30%)

‚úÖ **–ü—Ä–æ–º–æ–∫–æ–¥—ã**:
- –ü—Ä–æ—Ü–µ–Ω—Ç–Ω—ã–µ —Å–∫–∏–¥–∫–∏
- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∫–∏–¥–∫–∏  
- –ü—Ä–æ–¥–ª–µ–Ω–∏–µ trial
- –õ–∏–º–∏—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

‚úÖ **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**:
- –ó–∞ 3 –¥–Ω—è –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è
- –ó–∞ 1 –¥–µ–Ω—å –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è
- –ü—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –ø–æ–¥–ø–∏—Å–∫–∏

‚úÖ **–ü–ª–∞—Ç–µ–∂–∏**:
- Telegram Stars ‚úÖ

---

## Admin —Ñ—É–Ω–∫—Ü–∏–∏

### –ü—Ä–æ–º–æ–∫–æ–¥—ã (–±—É–¥–µ—Ç –≤ –∞–¥–º–∏–Ω–∫–µ)
```python
# –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥
code = await promo_repo.create_promo_code(
    code="NEWYEAR2025",
    type=PromoCodeType.PERCENT,
    discount_percent=20,
    max_uses=100,
)

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
stats = await promo_repo.get_promo_code_stats("NEWYEAR2025")
# {"usage_count": 45, "total_discount_given": 8910}
```

### –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ (–±—É–¥–µ—Ç –≤ –∞–¥–º–∏–Ω–∫–µ)
```python
# MRR, –∫–æ–Ω–≤–µ—Ä—Å–∏—è, churn
metrics = await admin_repo.get_subscription_metrics()
```

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
database/
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îú‚îÄ‚îÄ subscription.py      # Subscription, SubscriptionStatus
‚îÇ   ‚îú‚îÄ‚îÄ transaction.py        # Transaction, TransactionStatus
‚îÇ   ‚îî‚îÄ‚îÄ promo_code.py         # PromoCode, PromoCodeUsage
‚îú‚îÄ‚îÄ repositories/
‚îÇ   ‚îú‚îÄ‚îÄ subscription.py       # SubscriptionRepository
‚îÇ   ‚îî‚îÄ‚îÄ promo_code.py         # PromoCodeRepository
services/
‚îú‚îÄ‚îÄ payment.py                # PaymentService (Telegram Stars)
‚îî‚îÄ‚îÄ subscription_monitor.py   # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏—Å—Ç–µ—á–µ–Ω–∏–∏
bot/
‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îî‚îÄ‚îÄ subscription.py       # /subscription handlers
‚îú‚îÄ‚îÄ middlewares/
‚îÇ   ‚îî‚îÄ‚îÄ subscription.py       # SubscriptionMiddleware
‚îî‚îÄ‚îÄ subscription_plans.py     # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–∞—Ä–∏—Ñ–æ–≤
```

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ê–¥–º–∏–Ω–∫–∞**: UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–º–æ–∫–æ–¥–∞–º–∏
2. **–ú–µ—Ç—Ä–∏–∫–∏**: MRR, –∫–æ–Ω–≤–µ—Ä—Å–∏—è, churn –≤ –¥–∞—à–±–æ—Ä–¥–µ
3. **UI**: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ
