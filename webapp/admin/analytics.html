<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Analytics - BeautyAssist</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <link rel="stylesheet" href="analytics.css">
</head>
<body>
    <div class="analytics-container">
        <!-- Header -->
        <header class="header">
            <h1>üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</h1>
            <button id="refresh-btn" class="btn-refresh">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
        </header>

        <!-- Navigation Tabs -->
        <nav class="tabs">
            <button class="tab active" data-tab="overview">–û–±–∑–æ—Ä</button>
            <button class="tab" data-tab="retention">–£–¥–µ—Ä–∂–∞–Ω–∏–µ</button>
            <button class="tab" data-tab="cohorts">–ö–æ–≥–æ—Ä—Ç—ã</button>
            <button class="tab" data-tab="funnel">–í–æ—Ä–æ–Ω–∫–∞</button>
        </nav>

        <!-- Overview Tab -->
        <section id="overview" class="tab-content active">
            <div class="metrics-grid">
                <div class="metric-card">
                    <h3>üë• DAU</h3>
                    <p class="value" id="dau-value">-</p>
                    <span class="label">–î–Ω–µ–≤–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</span>
                </div>
                <div class="metric-card">
                    <h3>üìÖ WAU</h3>
                    <p class="value" id="wau-value">-</p>
                    <span class="label">–ù–µ–¥–µ–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</span>
                </div>
                <div class="metric-card">
                    <h3>üìÜ MAU</h3>
                    <p class="value" id="mau-value">-</p>
                    <span class="label">–ú–µ—Å—è—á–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</span>
                </div>
                <div class="metric-card">
                    <h3>üìà –†–æ—Å—Ç</h3>
                    <p class="value" id="growth-value">-</p>
                    <span class="label">–ü—Ä–∏—Ä–æ—Å—Ç –∑–∞ –º–µ—Å—è—Ü</span>
                </div>
                <div class="metric-card">
                    <h3>‚úÖ –ê–∫—Ç–∏–≤–∞—Ü–∏—è</h3>
                    <p class="value" id="activation-value">-</p>
                    <span class="label">–ó–∞–≤–µ—Ä—à–∏–ª–∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥</span>
                </div>
                <div class="metric-card">
                    <h3>üéØ –ö–æ–Ω–≤–µ—Ä—Å–∏—è</h3>
                    <p class="value" id="paid-conversion-value">-</p>
                    <span class="label">–ü—Ä–æ–±–Ω—ã–π ‚Üí –ü–ª–∞—Ç–Ω—ã–π</span>
                </div>
            </div>

            <div class="chart-container">
                <h2>–û–±–∑–æ—Ä —É–¥–µ—Ä–∂–∞–Ω–∏—è</h2>
                <canvas id="retention-overview-chart"></canvas>
            </div>
        </section>

        <!-- Retention Tab -->
        <section id="retention" class="tab-content">
            <div class="info-box">
                <h2>–£–¥–µ—Ä–∂–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h2>
                <p>–ü—Ä–æ—Ü–µ–Ω—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –≤–µ—Ä–Ω—É–≤—à–∏—Ö—Å—è —á–µ—Ä–µ–∑ N –¥–Ω–µ–π –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</p>
            </div>
            <div class="chart-container">
                <canvas id="retention-chart"></canvas>
            </div>
            <div class="retention-stats">
                <div class="stat-item">
                    <span class="stat-label">–î–µ–Ω—å 1:</span>
                    <span class="stat-value" id="day1-retention">-</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">–î–µ–Ω—å 7:</span>
                    <span class="stat-value" id="day7-retention">-</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">–î–µ–Ω—å 30:</span>
                    <span class="stat-value" id="day30-retention">-</span>
                </div>
            </div>
        </section>

        <!-- Cohorts Tab -->
        <section id="cohorts" class="tab-content">
            <div class="info-box">
                <h2>–ê–Ω–∞–ª–∏–∑ –∫–æ–≥–æ—Ä—Ç</h2>
                <p>–£–¥–µ—Ä–∂–∞–Ω–∏–µ –ø–æ –Ω–µ–¥–µ–ª—è–º —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</p>
            </div>
            <div class="table-container">
                <table class="cohort-table" id="cohort-table">
                    <thead>
                        <tr>
                            <th>–ù–µ–¥–µ–ª—è</th>
                            <th>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π</th>
                            <th>–î–µ–Ω—å 0</th>
                            <th>–î–µ–Ω—å 7</th>
                            <th>–î–µ–Ω—å 14</th>
                            <th>–î–µ–Ω—å 30</th>
                        </tr>
                    </thead>
                    <tbody id="cohort-tbody">
                        <tr>
                            <td colspan="6" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Funnel Tab -->
        <section id="funnel" class="tab-content">
            <div class="info-box">
                <h2>–í–æ—Ä–æ–Ω–∫–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏</h2>
                <p>–í–æ—Ä–æ–Ω–∫–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</p>
            </div>
            <div class="funnel-container">
                <div class="funnel-stage">
                    <div class="stage-bar" id="registered-bar">
                        <span class="stage-label">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å</span>
                        <span class="stage-value" id="registered-value">-</span>
                    </div>
                </div>
                <div class="funnel-stage">
                    <div class="stage-bar" id="onboarded-bar">
                        <span class="stage-label">–ó–∞–≤–µ—Ä—à–∏–ª–∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥</span>
                        <span class="stage-value" id="onboarded-value">-</span>
                    </div>
                </div>
                <div class="funnel-stage">
                    <div class="stage-bar" id="first-service-bar">
                        <span class="stage-label">–°–æ–∑–¥–∞–ª–∏ —É—Å–ª—É–≥—É</span>
                        <span class="stage-value" id="first-service-value">-</span>
                    </div>
                </div>
                <div class="funnel-stage">
                    <div class="stage-bar" id="first-booking-bar">
                        <span class="stage-label">–ü–æ–ª—É—á–∏–ª–∏ –∑–∞–ø–∏—Å—å</span>
                        <span class="stage-value" id="first-booking-value">-</span>
                    </div>
                </div>
                <div class="funnel-stage">
                    <div class="stage-bar" id="paid-bar">
                        <span class="stage-label">–û–ø–ª–∞—Ç–∏–ª–∏ –ø–æ–¥–ø–∏—Å–∫—É</span>
                        <span class="stage-value" id="paid-value">-</span>
                    </div>
                </div>
            </div>
            <div class="chart-container">
                <canvas id="funnel-chart"></canvas>
            </div>
        </section>

        <!-- Loading Overlay -->
        <div id="loading-overlay" class="loading-overlay">
            <div class="spinner"></div>
            <p>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</p>
        </div>

        <!-- Error Message -->
        <div id="error-message" class="error-message"></div>
    </div>

    <script src="analytics.js"></script>
</body>
</html>
