<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Каталог услуг - BeautyAssist</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <link rel="stylesheet" href="services.css?v=20260205-9">>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <a href="/webapp-master/master.html" class="home-btn"><i data-feather="home"></i></a>
            <h1><i data-feather="book-open"></i> Каталог услуг</h1>
        </header>
        
        <button id="add-service-btn" class="btn-primary btn-add-service">
            <i data-feather="plus"></i> Добавить услугу
        </button>

        <!-- Services List -->
        <div id="services-list" class="services-list">
            <div class="loading">
                <div class="spinner"></div>
                <p>Загрузка услуг...</p>
            </div>
        </div>

        <!-- Empty State -->
        <div id="empty-state" class="empty-state" style="display: none;">
            <div class="empty-icon"><i data-feather="file-text" style="width:48px;height:48px"></i></div>
            <h2>Каталог услуг пуст</h2>
            <p>Добавьте первую услугу в каталог, чтобы клиенты могли записаться к вам</p>
            <button class="btn-primary" onclick="openServiceModal()">+ Добавить услугу</button>
        </div>

        <!-- Service Modal -->
        <div id="service-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="modal-title">Добавить услугу</h2>
                    <button class="close-btn" onclick="closeServiceModal()"><i data-feather="x"></i></button>
                </div>
                
                <form id="service-form">
                    <input type="hidden" id="service-id">
                    
                    <div class="form-group">
                        <label for="service-name">Название услуги *</label>
                        <input 
                            type="text" 
                            id="service-name" 
                            placeholder="Например: Маникюр" 
                            required
                            maxlength="100"
                        >
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="service-duration">Длительность (мин) *</label>
                            <input 
                                type="number" 
                                id="service-duration" 
                                placeholder="60" 
                                required
                                min="15"
                                max="480"
                                step="15"
                            >
                        </div>

                        <div class="form-group">
                            <label for="service-price">Цена (₽) *</label>
                            <input 
                                type="number" 
                                id="service-price" 
                                placeholder="1000" 
                                required
                                min="0"
                                max="999999"
                            >
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="service-category">Категория</label>
                        <div class="custom-select" id="service-category-wrapper">
                          <div class="custom-select-trigger" id="service-category-trigger">
                            <span class="custom-select-value placeholder">Без категории</span>
                            <i data-feather="chevron-down" class="custom-select-arrow"></i>
                          </div>
                          <div class="custom-select-options hidden" id="service-category-options">
                            <div class="custom-select-option selected" data-value="">Без категории</div>
                            <div class="custom-select-option" data-value="Ногти">Ногти</div>
                            <div class="custom-select-option" data-value="Брови и ресницы">Брови и ресницы</div>
                            <div class="custom-select-option" data-value="Волосы">Волосы</div>
                            <div class="custom-select-option" data-value="Макияж">Макияж</div>
                            <div class="custom-select-option" data-value="Массаж">Массаж</div>
                            <div class="custom-select-option" data-value="Косметология">Косметология</div>
                            <div class="custom-select-option" data-value="Другое">Другое</div>
                          </div>
                          <input type="hidden" id="service-category" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-label">
                            <input 
                                type="checkbox" 
                                id="service-active" 
                                checked
                            >
                            <span>Услуга активна (доступна для записи клиентам)</span>
                        </label>
                    </div>

                    <div class="form-group">
                        <label for="service-description">Описание</label>
                        <textarea 
                            id="service-description" 
                            placeholder="Дополнительная информация об услуге (необязательно)"
                            maxlength="500"
                            rows="3"
                        ></textarea>
                        <span class="char-counter">0/500</span>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn-primary" id="save-btn">
                            <span class="btn-text">Сохранить</span>
                            <span class="btn-loading" style="display: none;">
                                <span class="spinner-small"></span>
                                Сохранение...
                            </span>
                        </button>
                        <button type="button" class="btn-secondary" onclick="closeServiceModal()">
                            Отмена
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Delete Confirmation Modal -->
        <div id="delete-modal" class="modal">
            <div class="modal-content modal-small">
                <div class="modal-header">
                    <h2>Удалить услугу?</h2>
                </div>
                
                <p class="delete-warning">
                    Вы уверены, что хотите удалить услугу "<span id="delete-service-name"></span>"?
                    Это действие нельзя отменить.
                </p>

                <div class="form-actions">
                    <button class="btn-danger" onclick="confirmDelete()">
                        Удалить
                    </button>
                    <button class="btn-secondary" onclick="closeDeleteModal()">
                        Отмена
                    </button>
                </div>
            </div>
        </div>

        <!-- Error Message -->
        <div id="error-toast" class="toast error-toast">
            <span id="error-message"></span>
        </div>

        <!-- Success Message -->
        <div id="success-toast" class="toast success-toast">
            <span id="success-message"></span>
        </div>
    </div>

    <script src="services.js?v=20260205-4"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        if (typeof feather !== 'undefined') feather.replace({ 'stroke-width': 2.5 });
      });
    </script>
</body>
</html>
